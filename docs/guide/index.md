## ä¸€ã€ä½œç”¨åŸŸé“¾

ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾åœ¨Javascriptå’Œå¾ˆå¤šå…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æ˜¯ä¸€ç§åŸºç¡€æ¦‚å¿µã€‚ä½†å¾ˆå¤šJavascriptå¼€å‘è€…å¹¶ä¸çœŸæ­£ç†è§£å®ƒä»¬ï¼Œä½†è¿™äº›æ¦‚å¿µå¯¹æŒæ¡Javascriptè‡³å…³é‡è¦ã€‚

#### 1.ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸ

Javascriptä¸­çš„ä½œç”¨åŸŸè¯´çš„æ˜¯å˜é‡çš„å¯è®¿é—®æ€§å’Œå¯è§æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´æ•´ä¸ªç¨‹åºä¸­å“ªäº›éƒ¨åˆ†å¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡ï¼Œæˆ–è€…è¯´è¿™ä¸ªå˜é‡éƒ½åœ¨å“ªäº›åœ°æ–¹å¯è§ã€‚   



#### 2.ä½œç”¨åŸŸç±»å‹

- 1)ã€å…¨å±€ä½œç”¨åŸŸ

  > ä»»ä½•ä¸åœ¨å‡½æ•°ä¸­æˆ–ä¸åœ¨å¤§æ‹¬å·ä¸­å£°æ˜çš„å˜é‡ï¼Œéƒ½æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œå…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å¯ä»¥åœ¨ç¨‹åºçš„ä»»æ„ä½ç½®è®¿é—®åˆ°ã€‚
  >
  > ```javascript
  > var index = 1
  > function getIndex(){
  >     console.log(index)
  > }
  > //æ‰“å° 1
  > getIndex()
  > //æ‰“å° 1
  > console.log(window.index)
  > ```
  >
  > 

- 2)ã€å‡½æ•°ä½œç”¨åŸŸ

  > å‡½æ•°ä½œç”¨åŸŸä¹Ÿå«å±€éƒ¨ä½œç”¨åŸŸï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ˜¯åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„ä»–å°±åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸‹é¢ï¼Œè¿™äº›å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œä¸èƒ½å†å‡½æ•°ä»¥å¤–å»è®¿é—®ã€‚
  >
  > ```javascript
  > function getIndex(){
  >     var index = 1
  >     console.log(index)
  > }
  > //æ‰“å°1
  > getIndex()
  > // Uncaught (in promise) ReferenceError: index is not defined  
  > console.log(index)
  > ```

- 3)ã€å—çº§ä½œç”¨åŸŸ

  > ES6å¼•å…¥äº†letå’Œconstå…³é”®å­—ï¼Œåœ¨å¤§æ‹¬å·ä¸­ä½¿ç”¨let å’Œ const å£°æ˜çš„å˜é‡å­˜åœ¨äºå—çº§ä½œç”¨åŸŸã€‚åœ¨å¤§æ‹¬å·ä¹‹å¤–ä¸èƒ½è®¿é—®è¿™äº›å˜é‡ã€‚  
  >
  > ```javascript
  > {
  >     let name = 'Hello world';
  >     const age = 18;
  >     var lang = 'English'
  >     // æ‰“å° 'Hello world'
  >     console.log(name)
  > }
  > // æ‰“å° 'English'
  > console.log(lang)
  > // Uncaught ReferenceError: age is not defined
  > console.log(age)
  > ```
  >
  > ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨å¤§æ‹¬å·å†…ä½¿ç”¨`var`å£°æ˜çš„å˜é‡langæ˜¯å¯ä»¥åœ¨å¤§æ‹¬å·ä¹‹å¤–è®¿é—®çš„ã€‚ä½¿ç”¨`var`å£°æ˜çš„å˜é‡ä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸä¸­ã€‚åœ¨å¤§æ‹¬å·å†…ä½¿ç”¨const å£°æ˜çš„å˜é‡ age ä¸èƒ½åœ¨å¤§æ‹¬å·ä¹‹å¤–è®¿é—®

#### 3.ä½œç”¨åŸŸåµŒå¥—

```javascript
let a = 20;
function getAdd(){
    const b = 12 + a
    function getDeep(){
        const c = a + b + 10
        {
            let abc = `a:${a};b:${b};c:${c}`
            // æ‰“å° a:20;b:32;c:62
            console.log(abc)
        }
        // æ‰“å° 62
        console.log(c)
        return c
    }
   	return getDeep()
}
const total = getAdd()
// æ‰“å° 62
console.log(total)
```

ç®€å•çš„ä¾‹å­ï¼Œæœ‰å››å±‚ä½œç”¨åŸŸåµŒå¥—ï¼Œç¬¬ä¸€å±‚æ˜¯å—çº§ä½œç”¨åŸŸï¼ˆæœ‰letå£°æ˜çš„abcå˜é‡ï¼‰ï¼Œç¬¬äºŒå±‚æ˜¯getDeepå‡½æ•°ä½œç”¨åŸŸ ï¼ˆæœ‰constå£°æ˜çš„cå˜é‡ï¼‰ï¼Œç¬¬ä¸‰å±‚æ˜¯ getAddå‡½æ•°ä½œç”¨åŸŸï¼ˆæœ‰constå£°æ˜çš„bå˜é‡ï¼‰ ï¼Œç¬¬å››å±‚æ˜¯å…¨å±€ä½œç”¨åŸŸï¼ˆæœ‰letå£°æ˜çš„ aå˜é‡ï¼‰

#### 4. ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸé“¾

å½“åœ¨Javascriptä¸­ä½¿ç”¨ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œé¦–å…ˆJavascriptå¼•æ“ä¼šå°è¯•åœ¨å½“å‰ä½œç”¨åŸŸä¸‹å»å¯»æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå†åˆ°å®ƒçš„ä¸Šå±‚ä½œç”¨åŸŸå¯»æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡æˆ–æ˜¯å·²ç»åˆ°äº†å…¨å±€ä½œç”¨åŸŸã€‚

å¦‚æœåœ¨å…¨å±€ä½œç”¨åŸŸé‡Œä»ç„¶æ‰¾ä¸åˆ°è¯¥å˜é‡ï¼Œå®ƒå°±ä¼šåœ¨å…¨å±€èŒƒå›´å†…éšå¼å£°æ˜è¯¥å˜é‡(éä¸¥æ ¼æ¨¡å¼ä¸‹)æˆ–æ˜¯ç›´æ¥æŠ¥é”™ã€‚

```javascript
let name = 'Dingdang';
function sayHay(){
    const age = 18;
    console.log(`Hi! I am ${name}, ${age}å²`)
}
sayHay()
```

å½“sayHay()å‡½æ•°è°ƒç”¨æ—¶ï¼Œconsoleéœ€è¦ ageå’Œnameå˜é‡ï¼Œjavascriptå¼•æ“ä¼šåœ¨å½“å‰å‡½æ•°ä½œç”¨åŸŸä¸‹å¯»æ‰¾ ageå’Œnameå˜é‡ï¼Œä½†æ˜¯è¯¥å‡½æ•°ä½œç”¨åŸŸå†…åªæœ‰ageå˜é‡ï¼Œå°±ä¼šåœ¨ä¸Šå±‚ä½œç”¨åŸŸä¸­å¯»æ‰¾ï¼ˆè¯¥ä¾‹ä¸­ï¼Œä¸Šå±‚ä½œç”¨åŸŸå°±æ˜¯å…¨å±€ä½œç”¨åŸŸäº†ï¼‰ï¼Œæ‰¾åˆ° nameå˜é‡ã€‚

**ç»“è®ºï¼š**å½“ä½¿ç”¨ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼ŒJavascriptå¼•æ“ä¼šå¾ªç€ä½œç”¨åŸŸé“¾ä¸€å±‚ä¸€å±‚å¾€ä¸Šæ‰¾è¯¥å˜é‡ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡ä¸ºæ­¢ã€‚è¿™ä¸€å±‚å±‚çš„å…³ç³»å°±å«ä½œç”¨åŸŸé“¾

#### 5.é—­åŒ…

**é—­åŒ…**æ˜¯***Javascript***è¯­è¨€çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¹Ÿæ˜¯ç‰¹è‰²ï¼Œå¾ˆå¤šé«˜çº§åº”ç”¨éƒ½è¦ä¾é é—­åŒ…æ¥å®ç°



## äºŒã€jsåŸå‹é“¾

#### 1.åŸå‹å’ŒåŸå‹å¯¹è±¡

> åŸå‹ï¼ˆprototypeï¼‰æ˜¯å‡½æ•°çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸ªæŒ‡é’ˆæŒ‡å‘åŸå‹å¯¹è±¡ã€‚æ— è®ºä½•æ—¶ï¼Œåªè¦åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™ä¸ºè¿™ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªprototypeå±æ€§ï¼ˆæŒ‡å‘åŸå‹å¯¹è±¡ï¼‰ã€‚

> åŸå‹å¯¹è±¡æ˜¯ä¸€ä¸ªå±äºå…¶æ‰€åœ¨å‡½æ•°çš„ç©ºå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å®ƒç»™å‡½æ•°æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼ŒåŸå‹å¯¹è±¡ä¹Ÿæ‹¥æœ‰ä¸€ä¸ªé»˜è®¤å±æ€§**constructor**æŒ‡å‘å…¶å‡½æ•°ã€‚

æ‰€æœ‰å®ä¾‹å¯¹è±¡ éœ€è¦å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½æ”¾åœ¨åŸå‹å¯¹è±¡é‡Œï¼›ä¸éœ€è¦å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ”¾åœ¨æ„é€ å‡½æ•°é‡Œã€‚

**æ¯æ¬¡è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹çš„å†…éƒ¨[[Prototype]]æŒ‡é’ˆå°±ä¼šè¢«å¤åˆ¶ä¸ºæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚è„šæœ¬ä¸­æ²¡æœ‰è®¿é—®è¿™ä¸ª[[Prototype]]ç‰¹æ€§çš„æ ‡å‡†æ–¹å¼ï¼Œä½†æ˜¯Firefoxã€Safariå’ŒChromeä¼šåœ¨æ¯ä¸ªå¯¹è±¡ä¸Šæš´éœ²`__proto__`å±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§å¯ä»¥è®¿é—®å¯¹è±¡çš„åŸå‹ã€‚**

```js
jsä¹‹çˆ¶åœ¨è®¾è®¡jsåŸå‹ã€åŸå‹é“¾çš„æ—¶å€™éµä»ä»¥ä¸‹ä¸¤ä¸ªå‡†åˆ™
    1. Person.prototype.constructor == Person // **å‡†åˆ™1ï¼šåŸå‹å¯¹è±¡ï¼ˆå³Person.prototypeï¼‰çš„constructoræŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«**
    2. person01.__proto__ == Person.prototype // **å‡†åˆ™2ï¼šå®ä¾‹ï¼ˆå³person01ï¼‰çš„__proto__å’ŒåŸå‹å¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªåœ°æ–¹**
```

![image-20230220183907833](https://raw.githubusercontent.com/wangdi9588/picture_bed/master/img/image-20230220183907833.png)

**æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œå¼•ç”¨å…¶åŸå‹å¯¹è±¡ï¼Œè€Œè¿™ä¸ªåŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸ªconstructorå±æ€§å¼•ç”¨è¿™ä¸ªæ„é€ å‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œä¸¤è€…å¾ªç¯å¼•ç”¨**

> æ­£å¸¸çš„åŸå‹é“¾éƒ½ä¼šç»ˆæ­¢äºObjectçš„åŸå‹å¯¹è±¡ï¼ŒObjectçš„åŸå‹å¯¹è±¡ä¸ºnull

#### 2.`__proto__`å’Œprototypeçš„åŒºåˆ«

`__proto__(éšå¼åŸå‹)`ï¼šJavaScriptä¸­ä»»æ„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®å±æ€§[[prototype]]ï¼Œåœ¨ES5ä¹‹å‰æ²¡æœ‰æ ‡å‡†çš„æ–¹æ³•è®¿é—®è¿™ä¸ªå†…ç½®å±æ€§ï¼Œä½†æ˜¯å¤§å¤šæ•°æµè§ˆå™¨éƒ½æ”¯æŒé€šè¿‡`__proto__`æ¥è®¿é—®ã€‚ES5ä¸­æœ‰äº†å¯¹äºè¿™ä¸ªå†…ç½®å±æ€§æ ‡å‡†çš„Getæ–¹æ³• Object.getPrototypeOf()ã€‚`__proto__`å±æ€§å·²åœ¨ECMAScript 6è¯­è¨€è§„èŒƒä¸­æ ‡å‡†åŒ–ï¼Œç”¨äºç¡®ä¿Webæµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œå› æ­¤å®ƒæœªæ¥å°†è¢«æ”¯æŒã€‚å®ƒå·²è¢«ä¸æ¨èä½¿ç”¨, ç°åœ¨æ›´æ¨èä½¿ç”¨[Object.getPrototypeOf]/[Reflect.getPrototypeOf] å’Œ[Object.setPrototypeOf]/Reflect.setPrototypeOfã€‚

prototype(æ˜¾å¼å±æ€§)ï¼šæ¯ä¸ªå‡½æ•°åœ¨åˆ›å»ºä¹‹åéƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸ºprototypeçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚

> æ³¨ï¼šé€šè¿‡Function.prototype.bindæ–¹æ³•æ„é€ å‡ºæ¥çš„å‡½æ•°æ˜¯ä¸ªä¾‹å¤–ï¼Œä»–æ²¡æœ‰prototypeå±æ€§ã€‚

`__proto__`å’Œprototype ä¸åŒï¼Œprototype åªåœ¨ Function ä¸­æœ‰ï¼Œè€Œ`__proto__`åˆ™åœ¨Functionå’ŒObjectä¸­éƒ½æœ‰ã€‚å³å‡½æ•°å¯¹è±¡ä¸­æ‰æœ‰prototypeï¼Œå®ä¾‹å¯¹è±¡ä¸­åªæœ‰`__proto__`å±æ€§ã€‚



#### 3.å‡½æ•°ä¸æ„é€ å‡½æ•°çš„åŒºåˆ«

- ##### æ„é€ å‡½æ•°éœ€è¦newæ“ä½œç¬¦å®ä¾‹åŒ–æ‰èƒ½ä½¿ç”¨

- ##### ä»»ä½•å‡½æ•°åªè¦ä½¿ç”¨äº†newæ“ä½œç¬¦è°ƒç”¨å°±æ˜¯æ„é€ å‡½æ•°ï¼Œè€Œä¸ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨çš„å‡½æ•°å°±æ˜¯æ™®é€šå‡½æ•°ã€‚

- ##### æ„é€ å‡½æ•°æ²¡æœ‰returnè¯­å¥

- ##### æ„é€ å‡½æ•°thisæŒ‡å‘è°ƒç”¨è€…ï¼Œå¾€å¾€æ˜¯è°ƒç”¨æ„é€ å‡½æ•°çš„å®ä¾‹æœ¬èº«ã€‚è€Œå‡½æ•°ä½¿ç”¨thisåˆ™ä¼šæŒ‡å‘windowå…¨å±€å¯¹è±¡

- ##### æ„é€ å‡½æ•°åé¦–å­—æ¯å¤§å†™ï¼ˆéå¼ºåˆ¶æ€§çš„ï¼‰

å®ä¾‹æ˜¯æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œæ‹¥æœ‰æ„é€ å‡½æ•°çš„å±æ€§å’Œæ–¹æ³•

- JavaScriptä¸­ä¸€åˆ‡çš†æ˜¯å¯¹è±¡ã€‚
- æ‰€æœ‰å¯¹è±¡æœ‰[[Prototype]]å±æ€§ï¼ŒæŒ‡å‘å…¶æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚
- æ‰€æœ‰å‡½æ•°éƒ½æœ‰prototypeå±æ€§ï¼ŒæŒ‡å‘å…¶åŸå‹å¯¹è±¡ã€‚
- æ‰€æœ‰å®ä¾‹éƒ½æœ‰constructorå±æ€§ï¼ŒæŒ‡å‘å…¶æ„é€ å‡½æ•°ã€‚

#### 4.å®ä¾‹ã€æ„é€ å‡½æ•°å’ŒåŸå‹å¯¹è±¡

- å®ƒä»¬æ˜¯3ä¸ªå®Œå…¨ä¸åŒçš„å¯¹è±¡ã€‚
- å®ä¾‹é€šè¿‡`__proto__`é“¾æ¥åˆ°åŸå‹å¯¹è±¡ã€‚å®ƒå®é™…æŒ‡å‘éšè—ç‰¹æ€§[[Prototype]]ã€‚
- æ„é€ å‡½æ•°é€šè¿‡prototypeå±æ€§é“¾æ¥åˆ°åŸå‹å¯¹è±¡ã€‚
- åŒä¸€ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„ä¸¤ä¸ªå®ä¾‹ï¼Œå…±äº«åŒä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚

#### 5.new æ“ä½œç¬¦åšäº†é‚£äº›äº‹æƒ…

1. åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚
2. è¿™ä¸ªæ–°å¯¹è±¡å†…éƒ¨çš„[[Prototype]]ç‰¹æ€§è¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚
3. æ„é€ å‡½æ•°å†…éƒ¨çš„thisè¢«èµ‹å€¼ä¸ºè¿™ä¸ªæ–°å¯¹è±¡ï¼ˆå³thisæŒ‡å‘æ–°å¯¹è±¡ï¼‰ã€‚
4. æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ã€‚
5. å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™ï¼Œè¿”å›åˆšåˆ›å»ºçš„æ–°å¯¹è±¡ã€‚(ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ„é€ å‡½æ•°ä¸è¿”å›å€¼ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸»åŠ¨è¿”å›å¯¹è±¡ï¼Œæ¥è¦†ç›–æ­£å¸¸çš„å¯¹è±¡åˆ›å»ºä¸èµ°)

#### 6.æ‰‹å†™ä¸€ä¸ªnewæ“ä½œç¬¦

```javascript
function Student(name,age){
  this.name = name
  this.age = age
  // return {
  //   nameAge:`${this.name}:${this.age}`
  // }
}

function myNew(fnc,...rest){
   //ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•° å¿…é¡»æ˜¯æ„é€ å‡½æ•°
  if(typeof fnc !== 'function'){
    throw new Error('ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¸ºfunction')
  }
  // new.target æŒ‡å‘ç›´æ¥è¢«newæ‰§è¡Œçš„æ„é€ å‡½æ•°ï¼Œè¿™é‡Œ myNew.target = fnc 
  myNew.target = fnc
  // 1.åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡  å¹¶ä¸”æ‰§è¡Œ[[Prototype]]é“¾æ¥ï¼Œå°†æ–°å¯¹è±¡å†…éƒ¨çš„[[Prototype]]ç‰¹æ€§ æŒ‡å‘æ„é€ å‡½æ•°çš„ åŸå‹å¯¹è±¡ä¸Š
  // Object.create() åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹
  const obj = Object.create(fnc.prototype)
  // æ„é€ å‡½æ•°å†…éƒ¨çš„thisè¢«èµ‹å€¼ä¸ºè¿™ä¸ªæ–°å¯¹è±¡ï¼ˆå³thisæŒ‡å‘æ–°å¯¹è±¡ï¼‰ï¼Œæ‰§è¡Œ æ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰
  // ä¸€èˆ¬æƒ…å†µä¸‹ æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œresult ä¸ºç©º ï¼Œåˆ™è¿”å› åˆšåˆ›å»ºçš„å¯¹è±¡
  // æ„é€ å‡½æ•°æœ‰è¿”å›å€¼ï¼Œä¸”ä¸ºéç©ºå¯¹è±¡(åŒ…å«`Functoin`, `Array`, `Date`, `RegExg`, `Error`)ï¼Œå°±è¿”å›è¯¥å¯¹è±¡
  const result = fnc.apply(obj,rest)
  const isObject = typeof result === 'object' && result !== null
  const isFunction = typeof result === 'function'
  if(isObject || isFunction){
    return result
  }
  return obj
}

function myNew(fnc,...rest){
  if(typeof fnc !== 'function'){
    throw new Error('ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¸ºfunction')
  }
  myNew.target = fnc
  // å¦‚æœä¸ç”¨ Object.create(), å°±è¦å°†æ­¥éª¤æ‹†å¼€
  // 1. åˆ›å»ºæ–°å¯¹è±¡
  const obj = new Object()
  // 2. å°†æ–°å¯¹è±¡çš„ [[Prototype]]ç‰¹æ€§ æŒ‡å‘ æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Š
  obj.__proto__ = fnc.prototype
  const result = fnc.apply(obj,rest)
  const isObject = typeof result === 'object' && result !== null
  const isFunction = typeof result === 'function'
  if(isObject || isFunction){
    return result
  }
  return obj
}
```

#### 7.åŸå‹é“¾

> åŸå‹é“¾æ˜¯å®ç°ç»§æ‰¿çš„ä¸»è¦æ–¹å¼ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ã€‚åŸå‹å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•°çš„constructorå±æ€§ã€‚è¯¥åŸå‹å¯¹è±¡åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ï¼Ÿå°±æ„å‘³ç€è¿™ä¸ªåŸå‹æœ¬èº«æœ‰ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªåŸå‹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œåœ¨å®ä¾‹å’ŒåŸå‹ä¹‹é—´æ„é€ äº†ä¸€ä¸ª é“¾æ¡å½¢å¼ï¼ˆåŸå‹é“¾ï¼‰ã€‚

![img](https://picx.zhimg.com/e83bca5f1d1e6bf359d1f75727968c11_r.jpg?source=1940ef5c)

â€‹																				               	***åŸå‹é“¾å…³ç³»å›¾***



```javascript
function Foo(){}
const f1 = new Foo()
console.log(f1.__proto__ === Foo.prototype) // true    //å®ä¾‹å¯¹è±¡çš„_proto__å±æ€§æŒ‡å‘ ç”Ÿæˆè¯¥å®ä¾‹çš„ æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡
console.log(f1.constructor === Foo)  // true           //å®ä¾‹å¯¹è±¡çš„constructorå±æ€§ æŒ‡å‘ ç”Ÿæˆè¯¥å®ä¾‹çš„ æ„é€ å‡½æ•° æœ¬èº«
console.log(Foo.prototype.__proto__ === Object.prototype) // true // Foo.prototype ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„__proto__ å±æ€§ æŒ‡å‘ æ„é€ å‡½æ•°Objectçš„åŸå‹å¯¹è±¡ï¼ˆObject.prototypeï¼‰
console.log(Foo.prototype.constructor === Foo)  // true   // Foo.prototype ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªå¯¹è±¡,å®ƒçš„constructorå±æ€§æŒ‡å‘ Foo æ„é€ å‡½æ•°æœ¬èº«
console.log(Object.prototype.__proto__ === null)  // true   // Object.prototype ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»–çš„__proto__å±æ€§å€¼ä¸º nullï¼Œè¡¨ç¤ºåŸå‹é“¾ é¡¶ç«¯
// f1 -(__proto__)-> Foo.prototype -(__proto__)-> Object.prototype -(__proto__)-> null  //è¿™æ¡åŸå‹é“¾ç»“æŸ

console.log(Foo.__proto__ === Function.prototype) // true  //  å½“æŠŠå‡½æ•°å½“æˆå¯¹è±¡çš„æ—¶å€™ï¼Œå‡½æ•°ä¹Ÿæœ‰__proto__å±æ€§ï¼Œå¹¶ä¸”ç”Ÿæˆå®ƒçš„å‡½æ•°å°±æ˜¯Function
console.log(Function.prototype.__proto__ === Object.prototype) // true  //Function.prototype ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„__proto__å±æ€§æŒ‡å‘ æ„é€ å‡½æ•°Objectçš„åŸå‹å¯¹è±¡ï¼ˆObject.prototypeï¼‰

// Foo -(__proto__)->Function.prototype -(__proto__)-> Object.prototype -(__proto__)-> null  //è¿™æ¡åŸå‹é“¾ç»“æŸ
```

#### 8.ç»§æ‰¿

1. åŸå‹é“¾ç»§æ‰¿ï¼ˆ**prototypeæ¨¡å¼**ï¼‰

> åŸå‹é“¾ç»§æ‰¿æ˜¯å°† **å­æ„é€ å‡½æ•°**çš„åŸå‹å¯¹è±¡ï¼ŒæŒ‡å‘ ***çˆ¶æ„é€ å‡½æ•°***ç”Ÿæˆçš„å®ä¾‹ä¸Šï¼Œé€šè¿‡åŸå‹é“¾ï¼Œ**å­æ„é€ å‡½æ•°**ç”Ÿæˆçš„å®ä¾‹ å¯ä»¥è®¿é—®åˆ° **çˆ¶æ„é€ å‡½æ•°**ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚

```javascript
  function Parent() {
    this.name = "parent1";
    this.play = [1, 2, 3];
  }
  Parent.prototype.sayHi = function () {
    console.log(`Hi!,${this.type}`);
  };
  Parent.prototype.work = "ä¿å®‰";
  function Child() {
    this.type = "child";
  }
  const parent1 = new Parent()
  console.log("ğŸš€ ~ file: index.vue:48 ~ temPrototypeChainInherite ~ parent1:", parent1)
  // å°† çˆ¶æ„é€ å‡½æ•°çš„ å®ä¾‹ å½“æˆ å­æ„é€ å‡½æ•°çš„ åŸå‹å¯¹è±¡
  Child.prototype = new Parent();
  // ä¿æŒç»§æ‰¿é“¾çš„æ­£ç¡® å°† å­æ„é€ å‡½æ•°çš„ constructorå±æ€§ æŒ‡å‘ å­æ„é€ å‡½æ•°æœ¬èº«
  Child.prototype.constructor = Child;
```

æ‰“å°parent1ï¼Œç»“æœå¦‚ä¸‹ï¼š

![image-20230222103712547](https://raw.githubusercontent.com/wangdi9588/picture_bed/master/img/image-20230222103712547.png)

**åŸå‹é“¾çš„é—®é¢˜ï¼š**åŸå‹é“¾è™½ç„¶æ˜¯å®ç°ç»§æ‰¿çš„å¼ºå¤§å·¥å…·ï¼Œä½†å®ƒä¹Ÿæœ‰é—®é¢˜ã€‚ä¸»è¦é—®é¢˜å‡ºç°åœ¨åŸå‹ä¸­åŒ…å«å¼•ç”¨å€¼çš„æ—¶å€™ã€‚åŸå‹ä¸­åŒ…å«çš„å¼•ç”¨å€¼ä¼šåœ¨è™½æœ‰å®ä¾‹é—´å…±äº«ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå±æ€§é€šå¸¸ä¼šåœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰è€Œä¸ä¼šå®šä¹‰åœ¨åŸå‹ä¸Šçš„åŸå› ã€‚åœ¨ä½¿ç”¨åŸå‹å®ç°ç»§æ‰¿æ—¶ï¼ŒåŸå‹å®é™…ä¸Šå˜æˆäº†å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚è¿™æ„å‘³ç€åŸå…ˆçš„å®ä¾‹å±æ€§æ‘‡èº«ä¸€å˜æˆä¸ºäº†åŸå‹å±æ€§ã€‚**ä¸¾ä¸ªä¾‹å­ï¼ˆæ¥ç€ä¸Šé¢çš„æ¡ˆä¾‹ï¼‰**

```javascript
const child1 = new Child()
const child2 = new Child()
console.log(child1)
console.log(child2)
// å®ä¾‹child1 å’Œ child2 ç”±Childæ„é€ å‡½æ•° ç”Ÿæˆï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„ typeå±æ€§ï¼Œä»–ä»¬çš„[[Prototype]]ï¼ˆ__proto__ï¼‰ç‰¹æ€§æŒ‡å‘ åŸå‹å¯¹è±¡ï¼ˆnew Parent()ï¼‰,Parentæ„é€ å‡½æ•°ç”Ÿæˆçš„å®ä¾‹ æœ‰ name å’Œ play å±æ€§ï¼ˆéƒ½å½“ä½œ å­æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡å±æ€§ï¼‰
```

![image-20230222113354271](https://raw.githubusercontent.com/wangdi9588/picture_bed/master/img/image-20230222113354271.png)

```javascript
child1.age = 30
child1.play.push(4)
child1.name = "child1"
child1.type = 'newChild'
// è™½ç„¶å¯ä»¥é€šè¿‡å®ä¾‹ è¯»å–åŸå‹å¯¹è±¡ä¸Šçš„å€¼ï¼Œä½†æ˜¯ä¸å¯èƒ½é€šè¿‡å®ä¾‹é‡å†™è¿™äº›å€¼ã€‚å¦‚æœåœ¨å®ä¾‹ä¸Šæ·»åŠ äº†ä¸€ä¸ªä¸åŸå‹å¯¹è±¡ä¸­åŒåçš„å±æ€§ï¼Œé‚£å°±ä¼šåœ¨å®ä¾‹ä¸Šåˆ›å»ºè¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§å°±ä¼šé®ä½åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ã€‚ï¼ˆå¦‚ child1 ä¸­çš„type å±æ€§ï¼Œè™½ç„¶æ”¹å†™äº†ï¼Œåªæ˜¯åœ¨ child1 å®ä¾‹ä¸Šåˆ›å»ºäº†è¿™ä¸ªtypeå±æ€§ï¼Œä½†æ˜¯æ²¡å½±å“åŸå‹å¯¹è±¡å†… typeå±æ€§çš„å€¼ï¼‰

// ä½†å¯¹äºå¼•ç”¨æ•°æ®ç±»å‹  child1.play.push(4) è¯¥æ“ä½œ ä¼šç›´æ¥å½±å“ å­æ„é€ å‡½æ•° çš„åŸå‹å¯¹è±¡çš„ playå±æ€§ï¼Œå¯¼è‡´ ç”±å­æ„é€ å‡½æ•°ç”Ÿæˆçš„æ‰€æœ‰å®ä¾‹  è®¿é—® å­æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ çš„ playå±æ€§éƒ½å‘ç”Ÿäº†å˜åŒ–
console.log(child1)
console.log(child2)
```

![image-20230222114505622](https://raw.githubusercontent.com/wangdi9588/picture_bed/master/img/image-20230222114505622.png)

**æ€»ç»“ï¼šåŸå‹é“¾ç»§æ‰¿ç¼ºç‚¹**

- å­æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ å˜æˆäº† çˆ¶æ„é€ å‡½æ•°çš„å®ä¾‹. ä¹Œé¸¦å˜å‡¤å‡°  å®ä¾‹å±æ€§ æ‘‡èº«å˜æˆäº† åŸå‹å±æ€§
- åŸå‹æ˜¯æ‰€æœ‰å®ä¾‹å…±äº«çš„ï¼Œé€šè¿‡å®ä¾‹å¯¹åŸå‹ä¸Šå¼•ç”¨å±æ€§è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šå½±å“åˆ°æ¯ä¸ªå®ä¾‹ä¸Š
- æ„é€ å‡½æ•°åœ¨å®ä¾‹åŒ–æ—¶ï¼Œä¸èƒ½ç»™çˆ¶æ„é€ å‡½æ•°ä¼ å‚

2.é€šè¿‡ç›—ç”¨æ„é€ å‡½æ•°çš„å½¢å¼  å®ç°ç»§æ‰¿

> ä¸ºäº†è§£å†³åŸå‹åŒ…å« å¼•ç”¨ç±»å‹ å¯¼è‡´çš„ç»§æ‰¿é—®é¢˜ï¼Œé€šè¿‡ call/applyåœ¨å­æ„é€ å‡½æ•°å†…æ‰§è¡Œ çˆ¶æ„é€ å‡½æ•°ï¼ˆå°†çˆ¶æ„é€ å‡½æ•°å†…çš„this æŒ‡å‘ å­æ„é€ å‡½æ•°ï¼‰

```javascript
  const Parent = function (name) {
    this.name = name;
    this.colors = ["red", "green", "blue"];
    this.getName = function () {
      console.log(`I am ${this.name}`);
    };
  };
  Parent.prototype.sayHi = function () {
    console.log(`Hi!,good son`);
  };
  Parent.prototype.address = "å¦–çš‡æ˜Ÿ";
  const Child = function (type, name) {
    Parent.call(this, name);
    this.type = type;
  };

const parent = new Parent('çˆ¶æ„é€ å‡½æ•°')

const child = new Child('å­æ„é€ å‡½æ•°','çˆ¶æ„é€ å‡½æ•°')

console.log(child.__proto__ === Parent.prototype)  // false  childå®ä¾‹ åŸå‹é“¾ ä¸æŒ‡å‘ çˆ¶æ„é€ å‡½æ•°Parentçš„åŸå‹å¯¹è±¡

console.log(child.address)  // undefined  ç”±ä¸Šè¡Œè¯´æ˜å¯ä»¥çœ‹å‡º ç”±äº addresså±æ€§æ˜¯æŒ‚è½½åœ¨ Parent.prototypeå¯¹è±¡ä¸‹çš„ï¼Œä½†æ˜¯ childå®ä¾‹ åŸå‹é“¾ä¸æŒ‡å‘ Parent.prototype , å½“ç„¶ child1.address ä¹Ÿå°±æ²¡æœ‰å¯¹åº”å€¼äº†ã€‚
child.sayHi()  // åŒä¸Šï¼Œ child.sayHi() æ–¹æ³• ä¹Ÿä¼šæŠ¥é”™  child.sayHi is not a function
```

æ¥ç€å¾€ä¸‹çœ‹ï¼Œç”±Childæ„é€ å‡½æ•°ç”Ÿæˆ2ä¸ªå®ä¾‹ï¼Œæ‰“å°çœ‹ä¸‹ç»“æœ

```javascript
  const child1 = new Child("æ‚Ÿé¥­", "æ‚Ÿç©º");
  const child2 = new Child("çŠ¬å¤œå‰", "çŠ¬å¤§å°†");
  console.log("ğŸš€ ~ file: index.vue:122 ~ stealConstructor ~ child2:", child2)
  console.log("ğŸš€ ~ file: index.vue:124 ~ stealConstructor ~ child1:", child1)
```

![image-20230222162439407](https://raw.githubusercontent.com/wangdi9588/picture_bed/master/img/image-20230222162439407.png)

## ä¸‰ã€callã€applyã€bindæ–¹æ³•





## å››ã€å°†ç±»æ•°ç»„è½¬ä¸ºæ•°ç»„çš„æ–¹æ³•

#### 1.sliceæ–¹æ³•

```javascript
const arr = Array.prototype.slice.call(arguments)
const otherArr = [].slice.call(arguments)
```

#### 2.Array.fromæ–¹æ³•

```javascript
const arr = Array.from(arguments)
```

#### 3.æ‰©å±•è¿ç®—ç¬¦

```javascript
const arr = [...arguments]
```

## äº”ã€Array.prototype.slice.call() & Array.from()çš„åº”ç”¨å’Œç†è§£

> Array.prototype.slice.call() å¯å°†ç±»æ•°ç»„(arguments,NodeList)ï¼Œå­—ç¬¦ä¸²(String)è½¬æ¢æˆæ•°ç»„ã€‚
>
> Array.from() å¯å°†ç±»æ•°ç»„(arguments,NodeList)ï¼Œå¯è¿­ä»£å¯¹è±¡(Set,Map)ï¼Œå­—ç¬¦ä¸²(String)è½¬æ¢æˆæ•°ç»„ã€‚